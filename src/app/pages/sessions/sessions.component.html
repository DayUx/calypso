<app-header [showBack]="false" [showMenu]="true" [actions]="menuActions">
  <h1>{{target ? 'Sélectionnez une session' : 'Sessions'}}</h1>
</app-header>
<div class="content">
  <app-search [(value)]="searchValue" placeholder="Rechercher une session"></app-search>
  <app-add-button (click)="openCreateSession = true" [@enterAnimation] *ngIf="!searchValue"
                  label="Ajouter une session"></app-add-button>
  <div class="sessions-content">
    <div class="path">
      <app-tag class="ripple" (click)="openRoot()">/</app-tag>
      <app-tag class="ripple" [@enterAnimation] (click)="openAtIndexPath(index)"
               *ngFor="let pathItem of _path; index as index">{{pathItem}}</app-tag>
    </div>
    <div class="sessions">
      <app-session-item *ngIf="path.length > 0" [@enterAnimation] [file]="returnFile" (click)="back()"
                        [goBack]="true"></app-session-item>
      <app-empty-text *ngIf="sessions.length === 0" [@enterAnimation] [icon]="searchValue?'jamSearch':'jamGhost'"
                      [text]="searchValue?'Pas de résultat':'Le dossier est vide'"></app-empty-text>

      <app-session-item [selected]="session.active" long-press
                        (onLongPressing)="onLongPress($event,session)"
                        (click)="sessionClick(session)" [file]="session.file"
                        *ngFor="let session of sessions">
      </app-session-item>
    </div>
  </div>
</div>

<app-message-box [message]="'Entrer le nom du dossier'" [title]="'Créer un nouveau dossier'"
                 [(open)]="openCreateFolderPrompt" (callback)="messageBoxCallback($event)"
                 type="prompt"></app-message-box>
<app-message-box [title]="'Ajouter une session'"
                 [(open)]="openCreateSession"
                 (callback)="createSessionCallback($event)"
                 type="okcancel">
  <app-input [(value)]="newSession.title" label="Titre"></app-input>
  <app-input [(value)]="newSession.description" label="Description"></app-input>
  <app-input [value]="(newSession.date | date:'yyyy-MM-dd' )  || ''" (valueChange)="newSession.date = parseDate($event)"
             label="Date"
             type="date"></app-input>
</app-message-box>

