<app-header [showBack]="true" [showMenu]="true" [actions]="menuActions">
  <div class="header-content">
    <h1>
      Equipes
    </h1>
    <p>
      <span class="title">{{session.title}}</span>
      <span class="date">({{session.date | date:'dd/MM/yyyy'}})</span>
    </p>
  </div>
</app-header>
<div class="content">
  <app-search [(value)]="searchValue" placeholder="Rechercher un équipe"></app-search>
  <app-add-button (click)="createTeam()" *ngIf="!searchValue"
                  label="Ajouter un équipe"></app-add-button>

  <div class="teams">

    <app-empty-text *ngIf="teams.length === 0" [icon]="searchValue?'jamSearch':'jamGhost'"
                    [text]="searchValue?'Pas de résultat':'Aucun équipe enregistrée'"></app-empty-text>

    <app-team-item [selected]="isTeamSelected(team)" long-press
                   [session]="session"
                   (onLongPressing)="onLongPress($event,team)"
                   (click)="teamClick(team)" [team]="team"
                   *ngFor="let team of teams">
    </app-team-item>
  </div>
</div>


<app-message-box [title]="'Ajouter un équipe'"
                 [(open)]="openCreateTeam"
                 (callback)="createTeamCallback($event)"
                 type="okcancel">
  <app-input [(value)]="newTeam.name" label="Nom"></app-input>
  <div class="error" *ngIf="!isRequired(newTeam.name)">
    Ne doit pas être vide
  </div>
  <mat-form-field appearance="outline">
    <mat-label>Tireurs</mat-label>
    <mat-select [(ngModel)]="newTeam.users" multiple>
      <mat-option *ngFor="let option of storeUsers" [value]="option.id">
        {{ option.id }} - {{ option.firstname }} {{ option.lastname }}
      </mat-option>
    </mat-select>
  </mat-form-field>
</app-message-box>

